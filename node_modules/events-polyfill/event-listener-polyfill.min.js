(function(){if(typeof EventTarget==="undefined"){window.EventTarget=Node}var e=function(e,n){return"on"+n in e};var n=function(n,l){return e(n,l)||n.style["transition"]!==void 0};var l=function(n,l){if(e(n,l)){return true}else{if(/^ms/.test(l.toLowerCase())){return!!document.body.msRequestFullscreen}else if(/^moz/.test(l)){return!!document.body.mozRequestFullscreen}else if(/^webkit/.test(l)){return!!document.body.webkitRequestFullscreen}else{return false}}};var t=["","webkit","moz","ms","o"];var u={wheel:["wheel","mousewheel","DOMMouseScroll"].map(function(n){return{type:n,test:e}}),fullscreenchange:["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange","msfullscreenchange"].map(function(e){return{type:e,test:l}}),fullscreenerror:["fullscreenerror","mozfullscreenerror","webkitfullscreenerror","MSFullscreenError","msfullscreenerror"].map(function(e){return{type:e,test:l}})};["pointerlockchange","pointerlockerror","animationstart","animationiteration","animationend","pointercancel","pointerdown","pointerhover","pointermove","pointerout","pointerover","pointerup"].forEach(function(n){u[n]=t.map(function(l){return{type:l+n,test:e}})});["transitionstart","transitionrun","transitionend"].forEach(function(e){u[e]=t.map(function(l){return{type:l+e,test:n}})});var r=function(e,n){var l=u[e];if(l===void 0){return e}else{var t=0;for(;t<l.length;t++){if(l[t].test(n,l[t].type)){return l[t].type}}if(t===l.length){throw new Error("Not supported type <"+e+">")}}};var o={once:false,passive:false,capture:false};document.createDocumentFragment().addEventListener("test",function(){},{get once(){o.once=true;return false},get passive(){o.passive=true;return false},get capture(){o.capture=true;return false}});o.all=o.once&&o.passive&&o.capture;o.some=o.once||o.passive||o.capture;var i=[null,null,null,null,null,null,null,null,"Backspace","Tab",null,null,"Numpad5","NumpadEnter",null,null,"ShiftLeft","ControlRight","AltRight","Pause","CapsLock",null,null,null,null,null,null,"Escape",null,null,null,null,"Space","PageUp","PageDown","End","Home","ArrowLeft","ArrowUp","ArrowRight","ArrowDown",null,null,null,null,"Insert","Delete",null,"Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9",null,null,null,null,null,null,null,"KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyZ","KeyY","MetaLeft","MetaRight","ContextMenu",null,null,"Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadMultiply","NumpadAdd",null,"NumpadSubtract","NumpadDecimal","NumpadDivide","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"NumLock","ScrollLock",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"BracketLeft",null,"Comma","Slash","Period","Backquote","BracketRight",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Minus","Quote","Equal","Semicolon","Backslash",null,null,"IntlBackslash"];var s=function(e){if(typeof e==="function"){return e}else if(typeof e==="object"&&typeof e.handleEvent==="function"){return e.handleEvent}else{return function(n){e(n)}}};var a=function(e){switch(typeof e){case"boolean":e={capture:e};break;case"undefined":e={capture:false};break;case"object":break;default:throw new Error("Unsupported options type for addEventListener");break}e.once=typeof e.once==="boolean"?e.once:false;e.passive=typeof e.passive==="boolean"?e.passive:false;e.capture=typeof e.capture==="boolean"?e.capture:false;e.polyfill=typeof e.polyfill==="boolean"?e.polyfill:true;return e};var p=function(e,n,l){return{type:e,listener:s(n),options:a(l)}};var c=function(e,n){var l=n.type+"-"+(n.options.capture?"1":"0");if(e.__eventListeners===void 0){e.__eventListeners={}}if(e.__eventListeners[l]===void 0){e.__eventListeners[l]=[]}e.__eventListeners[l].push(n)};var f=function(e,n){var l=n.type+"-"+(n.options.capture?"1":"0");if(e.__eventListeners!==void 0&&e.__eventListeners[l]!==void 0){var t=e.__eventListeners[l];for(var u=0;u<t.length;u++){if(t[u].listener===n.listener){t.splice(u,1)}}if(t.length===0){delete e.__eventListeners[l]}}};var v=function(e,n){var l=n.type+"-"+(n.options.capture?"1":"0");if(e.__eventListeners!==void 0&&e.__eventListeners[l]!==void 0){var t=e.__eventListeners[l];for(var u=0;u<t.length;u++){if(t[u].listener===n.listener){return t[u]}}}return null};var d=function(e){var n=e.prototype.addEventListener;e.prototype.addEventListener=function(e,l,t){var u=p(e,l,t);var s=v(this,u);if(!s){var a={};a.type=u.options.polyfill?r(u.type,this):u.type;a.listener=function(n){if(u.options.once&&!o.once){this.removeEventListener(e,l,t)}if(u.options.passive&&!o.passive){n.preventDefault=function(){throw new Error("Unable to preventDefault inside passive event listener invocation.")}}if(u.options.polyfill){n.type=u.type;if(n instanceof KeyboardEvent){if(!("code"in n)){n.code=i[n.keyCode]}}}return u.listener.call(this,n)};a.options=o.some?u.options:u.options.capture;u.vendorArguments=a;c(this,u);n.call(this,a.type,a.listener,a.options)}};var l=e.prototype.removeEventListener;e.prototype.removeEventListener=function(e,n,t){var u=p(e,n,t);var r=v(this,u);if(r){f(this,u);l.call(this,r.vendorArguments.type,r.vendorArguments.listener,r.vendorArguments.options)}else{l.call(this,e,n,t)}}};d(EventTarget);if(!(window instanceof EventTarget)){d(Window)}})();